!function(e,t){var a=e.FileReader,n=!1,r="onmessage = function(e) { postMessage(!!FileReaderSync); };",o=["loadstart","progress","load","abort","error","loadend"],s=!1,i=e.FileReaderJS={enabled:!1,setupInput:p,setupDrop:g,setupClipboard:c,setSync:function(e){var t;(s=e)&&!n&&(t=l(r))&&(t.onmessage=function(e){n=e.data},t.postMessage({}))},getSync:function(){return s&&n},output:[],opts:{dragClass:"drag",accept:!1,readAsDefault:"DataURL",readAsMap:{},on:{loadstart:h,progress:h,load:h,abort:h,error:h,loadend:h,skip:h,groupstart:h,groupend:h,beforestart:h}}};if("undefined"!=typeof jQuery&&(jQuery.fn.fileReaderJS=function(e){return this.each((function(){jQuery(this).is("input")?p(this,e):g(this,e)}))},jQuery.fn.fileClipboard=function(e){return this.each((function(){c(this,e)}))}),a){var d,f=(d=0,function(){return d++}),u=function(e){return function(){return e++}}(0);i.enabled=!0}function l(t){var a=e.URL||e.webkitURL,n=e.Blob,r=e.Worker;if(!(a&&n&&r&&t))return null;var o=new n([t]);return new r(a.createObjectURL(o))}function c(e,t){if(i.enabled){var a=b(b({},i.opts),t);e.addEventListener("paste",(function(e){for(var t=[],n=(e.clipboardData||{}).items||[],r=0;r<n.length;r++){var o=n[r].getAsFile();if(o){var s=new RegExp("/(.*)").exec(o.type);if(!o.name&&s){var i=s[1];o.name="clipboard"+r+"."+i}t.push(o)}}t.length&&(v(e,t,a),e.preventDefault(),e.stopPropagation())}),!1)}}function p(e,t){if(i.enabled){var a=b(b({},i.opts),t);e.addEventListener("change",(function(t){v(t,e.files,a)}),!1),e.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),v(e,e.dataTransfer.files,a)}),!1)}}function g(e,a){if(i.enabled){var n=b(b({},i.opts),a),r=n.dragClass,o=!1;e.addEventListener("dragenter",s((function(t){t.stopPropagation(),t.preventDefault(),r&&m(e,r)})),!1),e.addEventListener("dragleave",s((function(t){r&&y(e,r)})),!1),e.addEventListener("dragover",s((function(t){t.stopPropagation(),t.preventDefault(),r&&m(e,r)})),!1),e.addEventListener("drop",s((function(t){t.stopPropagation(),t.preventDefault(),r&&y(e,r);v(t,t.dataTransfer.files,n)})),!1),t.body.addEventListener("dragstart",(function(e){o=!0}),!0),t.body.addEventListener("dragend",(function(e){o=!1}),!0),t.body.addEventListener("drop",(function(e){e.dataTransfer.files&&e.dataTransfer.files.length&&(e.stopPropagation(),e.preventDefault())}),!1)}function s(e){return function(){o||e.apply(this,arguments)}}}function v(e,t,r){var d,c=t.length,p={groupID:f(),files:t,started:new Date};function g(){p.ended=new Date,r.on.groupend(p)}function v(){0==--c&&g()}(i.output.push(p),function(e,t){for(var a=0;a<e.length;a++){var n=e[a];n.extra={nameNoExtension:n.name.substring(0,n.name.lastIndexOf(".")),extension:n.name.substring(n.name.lastIndexOf(".")+1),fileID:a,uniqueID:u(),groupID:t,prettySize:(r=n.size,o=void 0,o=Math.floor(Math.log(r)/Math.log(1024)),(r/Math.pow(1024,Math.floor(o))).toFixed(2)+" "+["bytes","kb","MB","GB","TB","PB"][o])}}var r,o}(t,p.groupID),r.on.groupstart(p),t.length)?(s&&n&&((d=l("self.addEventListener('message', function(e) { var data=e.data; try { var reader = new FileReaderSync; postMessage({ result: reader[data.readAs](data.file), extra: data.extra, file: data.file})} catch(e){ postMessage({ result:'error', extra:data.extra, file:data.file}); } }, false);")).onmessage=function(e){var t=e.data.file,a=e.data.result;t.extra||(t.extra=e.data.extra),t.extra.ended=new Date,r.on["error"===a?"error":"load"]({target:{result:a}},t),v()}),Array.prototype.forEach.call(t,(function(t){if(t.extra.started=new Date,r.accept&&!t.type.match(new RegExp(r.accept)))return r.on.skip(t),void v();if(!1===r.on.beforestart(t))return r.on.skip(t),void v();var n=function(e,t,a){for(var n in t)if(e.match(new RegExp(n)))return"readAs"+t[n];return"readAs"+a}(t.type,r.readAsMap,r.readAsDefault);if(d)d.postMessage({file:t,extra:t.extra,readAs:n});else{var s=new a;s.originalEvent=e,o.forEach((function(e){s["on"+e]=function(a){"load"!=e&&"error"!=e||(t.extra.ended=new Date),r.on[e](a,t),"loadend"==e&&v()}})),s[n](t)}}))):g()}function h(){}function b(e,t){for(var a in t)t[a]&&t[a].constructor&&t[a].constructor===Object?(e[a]=e[a]||{},arguments.callee(e[a],t[a])):e[a]=t[a];return e}function x(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)}function m(e,t){x(e,t)||(e.className=e.className?[e.className,t].join(" "):t)}function y(e,t){if(x(e,t)){var a=e.className;e.className=a.replace(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}}(this,document);
